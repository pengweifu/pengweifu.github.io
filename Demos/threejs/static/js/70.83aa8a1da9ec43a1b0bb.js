(window.webpackJsonp=window.webpackJsonp||[]).push([[70],{"3F3C":function(t,e,i){"use strict";var n=i("Womt"),o=i("RyHr"),r=function(){function t(){this.initScene(),this.initCamera(),this.initLight(),this.initObject(),this.initRenderer(),this.initControls(),this.animate()}return t.prototype.initScene=function(){this.scene=new n.Scene},t.prototype.initCamera=function(){this.winHeight=window.innerHeight-document.getElementById("app").getBoundingClientRect().top,this.camera=new n.PerspectiveCamera(60,window.innerWidth/this.winHeight,.1,1e3),this.camera.position.x=20,this.camera.position.y=-200,this.camera.position.z=20,this.camera.lookAt(new n.Vector3(0,0,0))},t.prototype.initLight=function(){this.light=new n.DirectionalLight(16777215,1),this.light.position.set(-80,60,40),this.light.shadow.camera.far=500,this.light.shadow.camera.near=20,this.light.shadow.camera.left=-50,this.light.shadow.camera.right=50,this.light.shadow.camera.top=50,this.light.shadow.camera.bottom=-50,this.light.castShadow=!0,this.scene.add(this.light)},t.prototype.initObject=function(){},t.prototype.initRenderer=function(){var t=this;this.renderer=new n.WebGLRenderer,this.renderer.setSize(window.innerWidth,this.winHeight),this.renderer.shadowMap.enabled=!0,document.getElementById("app").appendChild(this.renderer.domElement);var e=new MutationObserver((function(i){for(var n=0,o=i;n<o.length;n++){var r=o[n];if("childList"==r.type&&r.removedNodes.length>0){e.disconnect(),t.unload(),t.clear();break}}}));e.observe(document.getElementById("app"),{childList:!0}),window.addEventListener("resize",this.resize.bind(this),!1)},t.prototype.initControls=function(){this.controls=new o.a(this.camera,this.renderer.domElement)},t.prototype.animate=function(){this.renderer&&(this.controls.update(),this.renderer.render(this.scene,this.camera),requestAnimationFrame(this.animate.bind(this)))},t.prototype.resize=function(){this.renderer&&(this.winHeight=window.innerHeight-document.getElementById("app").getBoundingClientRect().top,this.camera.aspect=window.innerWidth/this.winHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(window.innerWidth,this.winHeight))},t.prototype.clear=function(){cancelAnimationFrame(this.animate.bind(this)),this.controls.dispose(),this.scene.dispose(),this.renderer.dispose(),this.renderer.forceContextLoss(),this.renderer=null,this.scene=null,window.removeEventListener("resize",this.resize.bind(this),!1)},t.prototype.unload=function(){console.log("unload")},t}();e.a=r},"9yDe":function(t,e,i){"use strict";i.r(e);var n,o=i("3F3C"),r=i("Womt"),s=i("iZKT"),a=undefined&&undefined.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),h=function(t){function e(){return t.call(this)||this}return a(e,t),e.prototype.initObject=function(){this.camera.position.x=-20,this.camera.position.y=30,this.camera.position.z=20,this.gui=new s.a;var t=[],e=new r.Bone;t.push(e),e.position.y=-16;for(var i=0;i<5;i++){(n=new r.Bone).position.y=8,t.push(n),e.add(n),e=n}for(i=0;i<t.length;i++){var n=t[i],o=this.gui.addFolder("Bone "+i);o.add(n.position,"x",n.position.x-10,n.position.x+10),o.add(n.position,"y",n.position.y-10,n.position.y+10),o.add(n.position,"z",n.position.z-10,n.position.z+10),o.add(n.rotation,"x",.5*-Math.PI,.5*Math.PI),o.add(n.rotation,"y",.5*-Math.PI,.5*Math.PI),o.add(n.rotation,"z",.5*-Math.PI,.5*Math.PI),o.add(n.scale,"x",0,2),o.add(n.scale,"y",0,2),o.add(n.scale,"z",0,2),o.__controllers[0].name("position.x"),o.__controllers[1].name("position.y"),o.__controllers[2].name("position.z"),o.__controllers[3].name("rotation.x"),o.__controllers[4].name("rotation.y"),o.__controllers[5].name("rotation.z"),o.__controllers[6].name("scale.x"),o.__controllers[7].name("scale.y"),o.__controllers[8].name("scale.z")}for(var a=new r.BoxBufferGeometry(8,32,8,8,8,8),h=a.attributes.position,d=new r.Vector3,c=[],l=[],p=0;p<h.count;p++){d.fromBufferAttribute(h,p);var u=d.y+16,m=Math.floor(u/8),w=u%8/8;c.push(m,m+1,0,0),l.push(1-w,w,0,0)}a.addAttribute("skinIndex",new r.Uint16BufferAttribute(c,4)),a.addAttribute("skinWeight",new r.Float32BufferAttribute(l,4));var f=new r.MeshNormalMaterial({skinning:!0}),y=new r.Skeleton(t);this.obj=new r.SkinnedMesh(a,f),this.obj.add(t[0]),this.obj.bind(y),this.obj.scale.multiplyScalar(1),this.scene.add(this.obj)},e.prototype.animate=function(){if(this.renderer){for(var t=.001*Date.now(),e=0;e<this.obj.skeleton.bones.length;e++)this.obj.skeleton.bones[e].rotation.z=2*Math.sin(t)/this.obj.skeleton.bones.length;this.controls.update(),this.renderer.render(this.scene,this.camera),requestAnimationFrame(this.animate.bind(this))}},e.prototype.unload=function(){this.gui.destroy()},e}(o.a);e["default"]=h}}]);