(window.webpackJsonp=window.webpackJsonp||[]).push([[66],{"3F3C":function(t,e,i){"use strict";var n=i("Womt"),o=i("RyHr"),r=function(){function t(){this.initScene(),this.initCamera(),this.initLight(),this.initObject(),this.initRenderer(),this.initControls(),this.animate()}return t.prototype.initScene=function(){this.scene=new n.Scene},t.prototype.initCamera=function(){this.winHeight=window.innerHeight-document.getElementById("app").getBoundingClientRect().top,this.camera=new n.PerspectiveCamera(60,window.innerWidth/this.winHeight,.1,1e3),this.camera.position.x=20,this.camera.position.y=-200,this.camera.position.z=20,this.camera.lookAt(new n.Vector3(0,0,0))},t.prototype.initLight=function(){this.light=new n.DirectionalLight(16777215,1),this.light.position.set(-80,60,40),this.light.shadow.camera.far=500,this.light.shadow.camera.near=20,this.light.shadow.camera.left=-50,this.light.shadow.camera.right=50,this.light.shadow.camera.top=50,this.light.shadow.camera.bottom=-50,this.light.castShadow=!0,this.scene.add(this.light)},t.prototype.initObject=function(){},t.prototype.initRenderer=function(){var t=this;this.renderer=new n.WebGLRenderer,this.renderer.setSize(window.innerWidth,this.winHeight),this.renderer.shadowMap.enabled=!0,document.getElementById("app").appendChild(this.renderer.domElement);var e=new MutationObserver((function(i){for(var n=0,o=i;n<o.length;n++){var r=o[n];if("childList"==r.type&&r.removedNodes.length>0){e.disconnect(),t.unload(),t.clear();break}}}));e.observe(document.getElementById("app"),{childList:!0}),window.addEventListener("resize",this.resize.bind(this),!1)},t.prototype.initControls=function(){this.controls=new o.a(this.camera,this.renderer.domElement)},t.prototype.animate=function(){this.renderer&&(this.controls.update(),this.renderer.render(this.scene,this.camera),requestAnimationFrame(this.animate.bind(this)))},t.prototype.resize=function(){this.renderer&&(this.winHeight=window.innerHeight-document.getElementById("app").getBoundingClientRect().top,this.camera.aspect=window.innerWidth/this.winHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(window.innerWidth,this.winHeight))},t.prototype.clear=function(){cancelAnimationFrame(this.animate.bind(this)),this.controls.dispose(),this.scene.dispose(),this.renderer.dispose(),this.renderer.forceContextLoss(),this.renderer=null,this.scene=null,window.removeEventListener("resize",this.resize.bind(this),!1)},t.prototype.unload=function(){console.log("unload")},t}();e.a=r},rj54:function(t,e,i){"use strict";i.r(e);var n,o=i("3F3C"),r=i("Womt"),s=undefined&&undefined.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),a=function(t){function e(){return t.call(this)||this}return s(e,t),e.prototype.initObject=function(){this.uniforms={amplitude:{value:1},color:{value:new r.Color(16720384)},colorTexture:{value:(new r.TextureLoader).load("./static/images/water.jpg")}},this.uniforms.colorTexture.value.wrapS=this.uniforms.colorTexture.value.wrapT=r.RepeatWrapping;var t=new r.ShaderMaterial({uniforms:this.uniforms,vertexShader:"uniform float amplitude;\t\t\tattribute float displacement;\t\t\tvarying vec3 vNormal;\t\t\tvarying vec2 vUv;\t\t\tvoid main() {\t\t\t\tvNormal = normal;\t\t\t\tvUv = ( 0.5 + amplitude ) * uv + vec2( amplitude );\t\t\t\tvec3 newPosition = position + amplitude * normal * vec3( displacement );\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( newPosition, 1.0 );\t\t\t}",fragmentShader:"varying vec3 vNormal;\t\t\tvarying vec2 vUv;\t\t\tuniform vec3 color;\t\t\tuniform sampler2D colorTexture;\t\t\tvoid main() {\t\t\t\tvec3 light = vec3( 0.5, 0.2, 1.0 );\t\t\t\tlight = normalize( light );\t\t\t\tfloat dProd = dot( vNormal, light ) * 0.5 + 0.5;\t\t\t\tvec4 tcolor = texture2D( colorTexture, vUv );\t\t\t\tvec4 gray = vec4( vec3( tcolor.r * 0.3 + tcolor.g * 0.59 + tcolor.b * 0.11 ), 1.0 );\t\t\t\tgl_FragColor = gray * vec4( vec3( dProd ) * vec3( color ), 1.0 );\t\t\t}",side:r.DoubleSide,transparent:!0}),e=new r.SphereBufferGeometry(30,60,64);this.displacement=new Float32Array(e.attributes.position.count),this.noise=new Float32Array(e.attributes.position.count);for(var i=0;i<this.displacement.length;i++)this.noise[i]=5*Math.random();e.addAttribute("displacement",new r.BufferAttribute(this.displacement,1)),this.obj=new r.Mesh(e,t),this.scene.add(this.obj)},e.prototype.initCamera=function(){this.winHeight=window.innerHeight-document.getElementById("app").getBoundingClientRect().top,this.camera=new r.PerspectiveCamera(60,window.innerWidth/this.winHeight,.1,1e3),this.camera.position.x=10,this.camera.position.y=50,this.camera.position.z=-60,this.camera.lookAt(new r.Vector3(0,0,0));var t=new r.AxesHelper(100);this.scene.add(t)},e.prototype.initLight=function(){var t=new r.PointLight(16777215,2,100),e=new r.AmbientLight(13421772);t.position.set(20,20,50),this.scene.add(t),this.scene.add(e);var i=new r.SpotLight(16777215);i.position.set(25,100,0),i.castShadow=!0,i.distance=120,this.scene.add(i)},e.prototype.animate=function(){if(this.renderer){var t=.01*Date.now();this.obj.rotation.y=this.obj.rotation.z=.01*t,this.uniforms.amplitude.value=2.5*Math.sin(.125*this.obj.rotation.y),this.uniforms.color.value.offsetHSL(5e-4,0,0);for(var e=0;e<this.displacement.length;e++)this.displacement[e]=Math.sin(.1*e+t),this.noise[e]+=.5*(.5-Math.random()),this.noise[e]=r.Math.clamp(this.noise[e],-5,5),this.displacement[e]+=this.noise[e];this.renderer.render(this.scene,this.camera),requestAnimationFrame(this.animate.bind(this))}},e}(o.a);e["default"]=a}}]);