(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{uLOr:function(e,t,a){"use strict";var r=a("Womt"),n=function(e){r.Loader.call(this,e)};n.prototype=Object.assign(Object.create(r.Loader.prototype),{constructor:n,load:function(e,t,a,n){var i=this,s=new r.Texture,o=new r.FileLoader(this.manager);return o.setResponseType("arraybuffer"),o.setPath(this.path),o.load(e,(function(e){s.image=i.parse(e),s.needsUpdate=!0,t!==undefined&&t(s)}),a,n),s},parse:function(e){var t=0,a=1,r=2,n=3,i=9,s=10,o=11,c=48,d=4,l=0,u=1,f=2,h=3;e.length<19&&console.error("THREE.TGALoader: Not enough data to contain header.");var p=new Uint8Array(e),m=0,g={id_length:p[m++],colormap_type:p[m++],image_type:p[m++],colormap_index:p[m++]|p[m++]<<8,colormap_length:p[m++]|p[m++]<<8,colormap_size:p[m++],origin:[p[m++]|p[m++]<<8,p[m++]|p[m++]<<8],width:p[m++]|p[m++]<<8,height:p[m++]|p[m++]<<8,pixel_size:p[m++],flags:p[m++]};!function(e){switch(e.image_type){case a:case i:(e.colormap_length>256||24!==e.colormap_size||1!==e.colormap_type)&&console.error("THREE.TGALoader: Invalid type colormap data for indexed type.");break;case r:case n:case s:case o:e.colormap_type&&console.error("THREE.TGALoader: Invalid type colormap data for colormap type.");break;case t:console.error("THREE.TGALoader: No data.");default:console.error('THREE.TGALoader: Invalid type "%s".',e.image_type)}(e.width<=0||e.height<=0)&&console.error("THREE.TGALoader: Invalid image size."),8!==e.pixel_size&&16!==e.pixel_size&&24!==e.pixel_size&&32!==e.pixel_size&&console.error('THREE.TGALoader: Invalid pixel size "%s".',e.pixel_size)}(g),g.id_length+m>e.length&&console.error("THREE.TGALoader: No data."),m+=g.id_length;var v=!1,b=!1,y=!1;switch(g.image_type){case i:v=!0,b=!0;break;case a:b=!0;break;case s:v=!0;break;case r:break;case o:v=!0,y=!0;break;case n:y=!0}var w="undefined"!=typeof OffscreenCanvas,N=w?new OffscreenCanvas(g.width,g.height):document.createElement("canvas");N.width=g.width,N.height=g.height;var x=N.getContext("2d"),k=x.createImageData(g.width,g.height),A=function(e,t,a,r,n){var i,s,o,c;if(s=a.pixel_size>>3,o=a.width*a.height*s,t&&(c=n.subarray(r,r+=a.colormap_length*(a.colormap_size>>3))),e){var d,l,u;i=new Uint8Array(o);for(var f=0,h=new Uint8Array(s);f<o;)if(l=1+(127&(d=n[r++])),128&d){for(u=0;u<s;++u)h[u]=n[r++];for(u=0;u<l;++u)i.set(h,f+u*s);f+=s*l}else{for(l*=s,u=0;u<l;++u)i[f+u]=n[r++];f+=l}}else i=n.subarray(r,r+=t?a.width*a.height:o);return{pixel_data:i,palettes:c}}(v,b,g,m,p);!function(e,t,a,r,n){var i,s,o,p,m,v;switch((g.flags&c)>>d){default:case f:i=0,o=1,m=t,s=0,p=1,v=a;break;case l:i=0,o=1,m=t,s=a-1,p=-1,v=-1;break;case h:i=t-1,o=-1,m=-1,s=0,p=1,v=a;break;case u:i=t-1,o=-1,m=-1,s=a-1,p=-1,v=-1}if(y)switch(g.pixel_size){case 8:!function(e,t,a,r,n,i,s,o){var c,d,l,u=0,f=g.width;for(l=t;l!==r;l+=a)for(d=n;d!==s;d+=i,u++)c=o[u],e[4*(d+f*l)+0]=c,e[4*(d+f*l)+1]=c,e[4*(d+f*l)+2]=c,e[4*(d+f*l)+3]=255}(e,s,p,v,i,o,m,r);break;case 16:!function(e,t,a,r,n,i,s,o){var c,d,l=0,u=g.width;for(d=t;d!==r;d+=a)for(c=n;c!==s;c+=i,l+=2)e[4*(c+u*d)+0]=o[l+0],e[4*(c+u*d)+1]=o[l+0],e[4*(c+u*d)+2]=o[l+0],e[4*(c+u*d)+3]=o[l+1]}(e,s,p,v,i,o,m,r);break;default:console.error("THREE.TGALoader: Format not supported.")}else switch(g.pixel_size){case 8:!function(e,t,a,r,n,i,s,o,c){var d,l,u,f=c,h=0,p=g.width;for(u=t;u!==r;u+=a)for(l=n;l!==s;l+=i,h++)d=o[h],e[4*(l+p*u)+3]=255,e[4*(l+p*u)+2]=f[3*d+0],e[4*(l+p*u)+1]=f[3*d+1],e[4*(l+p*u)+0]=f[3*d+2]}(e,s,p,v,i,o,m,r,n);break;case 16:!function(e,t,a,r,n,i,s,o){var c,d,l,u=0,f=g.width;for(l=t;l!==r;l+=a)for(d=n;d!==s;d+=i,u+=2)c=o[u+0]+(o[u+1]<<8),e[4*(d+f*l)+0]=(31744&c)>>7,e[4*(d+f*l)+1]=(992&c)>>2,e[4*(d+f*l)+2]=(31&c)>>3,e[4*(d+f*l)+3]=32768&c?0:255}(e,s,p,v,i,o,m,r);break;case 24:!function(e,t,a,r,n,i,s,o){var c,d,l=0,u=g.width;for(d=t;d!==r;d+=a)for(c=n;c!==s;c+=i,l+=3)e[4*(c+u*d)+3]=255,e[4*(c+u*d)+2]=o[l+0],e[4*(c+u*d)+1]=o[l+1],e[4*(c+u*d)+0]=o[l+2]}(e,s,p,v,i,o,m,r);break;case 32:!function(e,t,a,r,n,i,s,o){var c,d,l=0,u=g.width;for(d=t;d!==r;d+=a)for(c=n;c!==s;c+=i,l+=4)e[4*(c+u*d)+2]=o[l+0],e[4*(c+u*d)+1]=o[l+1],e[4*(c+u*d)+0]=o[l+2],e[4*(c+u*d)+3]=o[l+3]}(e,s,p,v,i,o,m,r);break;default:console.error("THREE.TGALoader: Format not supported.")}}(k.data,g.width,g.height,A.pixel_data,A.palettes);return x.putImageData(k,0,0),w?N.transferToImageBitmap():N}}),a.d(t,"a",(function(){return i}));var i=function(e){r.Loader.call(this,e)};i.prototype=Object.assign(Object.create(r.Loader.prototype),{constructor:i,load:function(e,t,a,n){var i=this,s=""===i.path?r.LoaderUtils.extractUrlBase(e):i.path,o=new r.FileLoader(i.manager);o.setPath(i.path),o.load(e,(function(e){t(i.parse(e,s))}),a,n)},options:{set convertUpAxis(e){console.warn("THREE.ColladaLoader: options.convertUpAxis() has been removed. Up axis is converted automatically.")}},parse:function(e,t){function a(e,t){for(var a=[],r=e.childNodes,n=0,i=r.length;n<i;n++){var s=r[n];s.nodeName===t&&a.push(s)}return a}function i(e){if(0===e.length)return[];for(var t=e.trim().split(/\s+/),a=new Array(t.length),r=0,n=t.length;r<n;r++)a[r]=t[r];return a}function s(e){if(0===e.length)return[];for(var t=e.trim().split(/\s+/),a=new Array(t.length),r=0,n=t.length;r<n;r++)a[r]=parseFloat(t[r]);return a}function o(e){if(0===e.length)return[];for(var t=e.trim().split(/\s+/),a=new Array(t.length),r=0,n=t.length;r<n;r++)a[r]=parseInt(t[r]);return a}function c(e){return e.substring(1)}function d(e){return 0===Object.keys(e).length}function l(e){return e!==undefined&&!0===e.hasAttribute("meter")?parseFloat(e.getAttribute("meter")):1}function u(e){return e!==undefined?e.textContent:"Y_UP"}function f(e,t,r,n){var i=a(e,t)[0];if(i!==undefined)for(var s=a(i,r),o=0;o<s.length;o++)n(s[o])}function h(e,t){for(var a in e){e[a].build=t(e[a])}}function p(e,t){return e.build!==undefined?e.build:(e.build=t(e),e.build)}function m(e){for(var t={inputs:{}},a=0,r=e.childNodes.length;a<r;a++){var n=e.childNodes[a];if(1===n.nodeType)switch(n.nodeName){case"input":var i=c(n.getAttribute("source")),s=n.getAttribute("semantic");t.inputs[s]=i}}return t}function g(e){var t={},a=e.getAttribute("target").split("/"),r=a.shift(),n=a.shift(),i=-1!==n.indexOf("("),s=-1!==n.indexOf(".");if(s)a=n.split("."),n=a.shift(),t.member=a.shift();else if(i){var o=n.split("(");n=o.shift();for(var d=0;d<o.length;d++)o[d]=parseInt(o[d].replace(/\)/,""));t.indices=o}return t.id=r,t.sid=n,t.arraySyntax=i,t.memberSyntax=s,t.sampler=c(e.getAttribute("source")),t}function v(e){var t=[],a=e.channels,r=e.samplers,n=e.sources;for(var i in a)if(a.hasOwnProperty(i)){var s=a[i],o=r[s.sampler],c=o.inputs.INPUT,d=o.inputs.OUTPUT;k(y(s,n[c],n[d]),t)}return t}function b(e){return p(Ye.animations[e],v)}function y(e,t,a){var r,n,i,s,o,c,d=Ye.nodes[e.id],l=Se(d.id),u=d.transforms[e.sid],f=d.matrix.clone().transpose(),h={};switch(u){case"matrix":for(i=0,s=t.array.length;i<s;i++)if(r=t.array[i],n=i*a.stride,h[r]===undefined&&(h[r]={}),!0===e.arraySyntax){var p=a.array[n],m=e.indices[0]+4*e.indices[1];h[r][m]=p}else for(o=0,c=a.stride;o<c;o++)h[r][o]=a.array[n+o];break;case"translate":case"rotate":case"scale":console.warn('THREE.ColladaLoader: Animation transform type "%s" not yet implemented.',u)}var g=function(e,t){var a=[];for(var r in e)a.push({time:parseFloat(r),value:e[r]});a.sort((function(e,t){return e.time-t.time}));for(var n=0;n<16;n++)A(a,n,t.elements[n]);return a}(h,f);return{name:l.uuid,keyframes:g}}var w=new r.Vector3,N=new r.Vector3,x=new r.Quaternion;function k(e,t){for(var a=e.keyframes,n=e.name,i=[],s=[],o=[],c=[],d=0,l=a.length;d<l;d++){var u=a[d],f=u.time,h=u.value;_e.fromArray(h).transpose(),_e.decompose(w,x,N),i.push(f),s.push(w.x,w.y,w.z),o.push(x.x,x.y,x.z,x.w),c.push(N.x,N.y,N.z)}return s.length>0&&t.push(new r.VectorKeyframeTrack(n+".position",i,s)),o.length>0&&t.push(new r.QuaternionKeyframeTrack(n+".quaternion",i,o)),c.length>0&&t.push(new r.VectorKeyframeTrack(n+".scale",i,c)),t}function A(e,t,a){var r,n,i,s=!0;for(n=0,i=e.length;n<i;n++)(r=e[n]).value[t]===undefined?r.value[t]=null:s=!1;if(!0===s)for(n=0,i=e.length;n<i;n++)(r=e[n]).value[t]=a;else!function(e,t){for(var a,r,n=0,i=e.length;n<i;n++){var s=e[n];if(null===s.value[t]){if(a=T(e,n,t),r=_(e,n,t),null===a){s.value[t]=r.value[t];continue}if(null===r){s.value[t]=a.value[t];continue}E(s,a,r,t)}}}(e,t)}function T(e,t,a){for(;t>=0;){var r=e[t];if(null!==r.value[a])return r;t--}return null}function _(e,t,a){for(;t<e.length;){var r=e[t];if(null!==r.value[a])return r;t++}return null}function E(e,t,a,r){a.time-t.time!=0?e.value[r]=(e.time-t.time)*(a.value[r]-t.value[r])/(a.time-t.time)+t.value[r]:e.value[r]=t.value[r]}function C(e){for(var t=[],a=e.name,n=e.end-e.start||-1,i=e.animations,s=0,o=i.length;s<o;s++)for(var c=b(i[s]),d=0,l=c.length;d<l;d++)t.push(c[d]);return new r.AnimationClip(a,n,t)}function L(e){return p(Ye.clips[e],C)}function R(e){for(var t={sources:{}},a=0,r=e.childNodes.length;a<r;a++){var n=e.childNodes[a];if(1===n.nodeType)switch(n.nodeName){case"bind_shape_matrix":t.bindShapeMatrix=s(n.textContent);break;case"source":var i=n.getAttribute("id");t.sources[i]=se(n);break;case"joints":t.joints=M(n);break;case"vertex_weights":t.vertexWeights=O(n)}}return t}function M(e){for(var t={inputs:{}},a=0,r=e.childNodes.length;a<r;a++){var n=e.childNodes[a];if(1===n.nodeType)switch(n.nodeName){case"input":var i=n.getAttribute("semantic"),s=c(n.getAttribute("source"));t.inputs[i]=s}}return t}function O(e){for(var t={inputs:{}},a=0,r=e.childNodes.length;a<r;a++){var n=e.childNodes[a];if(1===n.nodeType)switch(n.nodeName){case"input":var i=n.getAttribute("semantic"),s=c(n.getAttribute("source")),d=parseInt(n.getAttribute("offset"));t.inputs[i]={id:s,offset:d};break;case"vcount":t.vcount=o(n.textContent);break;case"v":t.v=o(n.textContent)}}return t}function I(e){var t={id:e.id},a=Ye.geometries[t.id];return e.skin!==undefined&&(t.skin=function(e){var t,a,n,i={joints:[],indices:{array:[],stride:4},weights:{array:[],stride:4}},s=e.sources,o=e.vertexWeights,c=o.vcount,d=o.v,l=o.inputs.JOINT.offset,u=o.inputs.WEIGHT.offset,f=e.sources[e.joints.inputs.JOINT],h=e.sources[e.joints.inputs.INV_BIND_MATRIX],p=s[o.inputs.WEIGHT.id].array,m=0;for(t=0,n=c.length;t<n;t++){var g=c[t],v=[];for(a=0;a<g;a++){var b=d[m+l],y=d[m+u],w=p[y];v.push({index:b,weight:w}),m+=2}for(v.sort(A),a=0;a<4;a++){var N=v[a];N!==undefined?(i.indices.array.push(N.index),i.weights.array.push(N.weight)):(i.indices.array.push(0),i.weights.array.push(0))}}e.bindShapeMatrix?i.bindMatrix=(new r.Matrix4).fromArray(e.bindShapeMatrix).transpose():i.bindMatrix=(new r.Matrix4).identity();for(t=0,n=f.array.length;t<n;t++){var x=f.array[t],k=(new r.Matrix4).fromArray(h.array,t*h.stride).transpose();i.joints.push({name:x,boneInverse:k})}return i;function A(e,t){return t.weight-e.weight}}(e.skin),a.sources.skinIndices=t.skin.indices,a.sources.skinWeights=t.skin.weights),t}function j(e){return e.build!==undefined?e.build:e.init_from}function q(e){var t=Ye.images[e];return t!==undefined?p(t,j):(console.warn("THREE.ColladaLoader: Couldn't find image with ID:",e),null)}function H(e){for(var t={surfaces:{},samplers:{}},a=0,r=e.childNodes.length;a<r;a++){var n=e.childNodes[a];if(1===n.nodeType)switch(n.nodeName){case"newparam":S(n,t);break;case"technique":t.technique=z(n);break;case"extra":t.extra=W(n)}}return t}function S(e,t){for(var a=e.getAttribute("sid"),r=0,n=e.childNodes.length;r<n;r++){var i=e.childNodes[r];if(1===i.nodeType)switch(i.nodeName){case"surface":t.surfaces[a]=U(i);break;case"sampler2D":t.samplers[a]=F(i)}}}function U(e){for(var t={},a=0,r=e.childNodes.length;a<r;a++){var n=e.childNodes[a];if(1===n.nodeType)switch(n.nodeName){case"init_from":t.init_from=n.textContent}}return t}function F(e){for(var t={},a=0,r=e.childNodes.length;a<r;a++){var n=e.childNodes[a];if(1===n.nodeType)switch(n.nodeName){case"source":t.source=n.textContent}}return t}function z(e){for(var t={},a=0,r=e.childNodes.length;a<r;a++){var n=e.childNodes[a];if(1===n.nodeType)switch(n.nodeName){case"constant":case"lambert":case"blinn":case"phong":t.type=n.nodeName,t.parameters=B(n)}}return t}function B(e){for(var t={},a=0,r=e.childNodes.length;a<r;a++){var n=e.childNodes[a];if(1===n.nodeType)switch(n.nodeName){case"emission":case"diffuse":case"specular":case"bump":case"ambient":case"shininess":case"transparency":t[n.nodeName]=V(n);break;case"transparent":t[n.nodeName]={opaque:n.getAttribute("opaque"),data:V(n)}}}return t}function V(e){for(var t={},a=0,r=e.childNodes.length;a<r;a++){var n=e.childNodes[a];if(1===n.nodeType)switch(n.nodeName){case"color":t[n.nodeName]=s(n.textContent);break;case"float":t[n.nodeName]=parseFloat(n.textContent);break;case"texture":t[n.nodeName]={id:n.getAttribute("texture"),extra:P(n)}}}return t}function P(e){for(var t={technique:{}},a=0,r=e.childNodes.length;a<r;a++){var n=e.childNodes[a];if(1===n.nodeType)switch(n.nodeName){case"extra":G(n,t)}}return t}function G(e,t){for(var a=0,r=e.childNodes.length;a<r;a++){var n=e.childNodes[a];if(1===n.nodeType)switch(n.nodeName){case"technique":D(n,t)}}}function D(e,t){for(var a=0,r=e.childNodes.length;a<r;a++){var n=e.childNodes[a];if(1===n.nodeType)switch(n.nodeName){case"repeatU":case"repeatV":case"offsetU":case"offsetV":t.technique[n.nodeName]=parseFloat(n.textContent);break;case"wrapU":case"wrapV":"TRUE"===n.textContent.toUpperCase()?t.technique[n.nodeName]=1:"FALSE"===n.textContent.toUpperCase()?t.technique[n.nodeName]=0:t.technique[n.nodeName]=parseInt(n.textContent)}}}function W(e){for(var t={},a=0,r=e.childNodes.length;a<r;a++){var n=e.childNodes[a];if(1===n.nodeType)switch(n.nodeName){case"technique":t.technique=J(n)}}return t}function J(e){for(var t={},a=0,r=e.childNodes.length;a<r;a++){var n=e.childNodes[a];if(1===n.nodeType)switch(n.nodeName){case"double_sided":t[n.nodeName]=parseInt(n.textContent)}}return t}function X(e){return e}function K(e){var t,a,n=(t=e.url,p(Ye.effects[t],X)),i=n.profile.technique,s=n.profile.extra;switch(i.type){case"phong":case"blinn":a=new r.MeshPhongMaterial;break;case"lambert":a=new r.MeshLambertMaterial;break;default:a=new r.MeshBasicMaterial}function o(e){var t=n.profile.samplers[e.id],a=null;t!==undefined?a=q(n.profile.surfaces[t.source].init_from):(console.warn("THREE.ColladaLoader: Undefined sampler. Access image directly (see #12530)."),a=q(e.id));if(null!==a){var i=function(e){var t,a=e.slice(2+(e.lastIndexOf(".")-1>>>0));switch(a=a.toLowerCase()){case"tga":t=We;break;default:t=Xe}return t}(a);if(i!==undefined){var s=i.load(a),o=e.extra;if(o!==undefined&&o.technique!==undefined&&!1===d(o.technique)){var c=o.technique;s.wrapS=c.wrapU?r.RepeatWrapping:r.ClampToEdgeWrapping,s.wrapT=c.wrapV?r.RepeatWrapping:r.ClampToEdgeWrapping,s.offset.set(c.offsetU||0,c.offsetV||0),s.repeat.set(c.repeatU||1,c.repeatV||1)}else s.wrapS=r.RepeatWrapping,s.wrapT=r.RepeatWrapping;return s}return console.warn("THREE.ColladaLoader: Loader for texture %s not found.",a),null}return console.warn("THREE.ColladaLoader: Couldn't create texture with ID:",e.id),null}a.name=e.name||"";var c=i.parameters;for(var l in c){var u=c[l];switch(l){case"diffuse":u.color&&a.color.fromArray(u.color),u.texture&&(a.map=o(u.texture));break;case"specular":u.color&&a.specular&&a.specular.fromArray(u.color),u.texture&&(a.specularMap=o(u.texture));break;case"bump":u.texture&&(a.normalMap=o(u.texture));break;case"ambient":u.texture&&(a.lightMap=o(u.texture));break;case"shininess":u.float&&a.shininess&&(a.shininess=u.float);break;case"emission":u.color&&a.emissive&&a.emissive.fromArray(u.color),u.texture&&(a.emissiveMap=o(u.texture))}}var f=c.transparent,h=c.transparency;if(h===undefined&&f&&(h={float:1}),f===undefined&&h&&(f={opaque:"A_ONE",data:{color:[1,1,1,1]}}),f&&h)if(f.data.texture)a.transparent=!0;else{var m=f.data.color;switch(f.opaque){case"A_ONE":a.opacity=m[3]*h.float;break;case"RGB_ZERO":a.opacity=1-m[0]*h.float;break;case"A_ZERO":a.opacity=1-m[3]*h.float;break;case"RGB_ONE":a.opacity=m[0]*h.float;break;default:console.warn('THREE.ColladaLoader: Invalid opaque type "%s" of transparent tag.',f.opaque)}a.opacity<1&&(a.transparent=!0)}return s!==undefined&&s.technique!==undefined&&1===s.technique.double_sided&&(a.side=r.DoubleSide),a}function Z(e){return p(Ye.materials[e],K)}function Q(e){for(var t=0;t<e.childNodes.length;t++){var a=e.childNodes[t];switch(a.nodeName){case"technique_common":return Y(a)}}return{}}function Y(e){for(var t={},a=0;a<e.childNodes.length;a++){var r=e.childNodes[a];switch(r.nodeName){case"perspective":case"orthographic":t.technique=r.nodeName,t.parameters=$(r)}}return t}function $(e){for(var t={},a=0;a<e.childNodes.length;a++){var r=e.childNodes[a];switch(r.nodeName){case"xfov":case"yfov":case"xmag":case"ymag":case"znear":case"zfar":case"aspect_ratio":t[r.nodeName]=parseFloat(r.textContent)}}return t}function ee(e){var t;switch(e.optics.technique){case"perspective":t=new r.PerspectiveCamera(e.optics.parameters.yfov,e.optics.parameters.aspect_ratio,e.optics.parameters.znear,e.optics.parameters.zfar);break;case"orthographic":var a=e.optics.parameters.ymag,n=e.optics.parameters.xmag,i=e.optics.parameters.aspect_ratio;n=n===undefined?a*i:n,a=a===undefined?n/i:a,n*=.5,a*=.5,t=new r.OrthographicCamera(-n,n,a,-a,e.optics.parameters.znear,e.optics.parameters.zfar);break;default:t=new r.PerspectiveCamera}return t.name=e.name||"",t}function te(e){var t=Ye.cameras[e];return t!==undefined?p(t,ee):(console.warn("THREE.ColladaLoader: Couldn't find camera with ID:",e),null)}function ae(e){for(var t={},a=0,r=e.childNodes.length;a<r;a++){var n=e.childNodes[a];if(1===n.nodeType)switch(n.nodeName){case"directional":case"point":case"spot":case"ambient":t.technique=n.nodeName,t.parameters=re(n)}}return t}function re(e){for(var t={},a=0,n=e.childNodes.length;a<n;a++){var i=e.childNodes[a];if(1===i.nodeType)switch(i.nodeName){case"color":var o=s(i.textContent);t.color=(new r.Color).fromArray(o);break;case"falloff_angle":t.falloffAngle=parseFloat(i.textContent);break;case"quadratic_attenuation":var c=parseFloat(i.textContent);t.distance=c?Math.sqrt(1/c):0}}return t}function ne(e){var t;switch(e.technique){case"directional":t=new r.DirectionalLight;break;case"point":t=new r.PointLight;break;case"spot":t=new r.SpotLight;break;case"ambient":t=new r.AmbientLight}return e.parameters.color&&t.color.copy(e.parameters.color),e.parameters.distance&&(t.distance=e.parameters.distance),t}function ie(e){var t=Ye.lights[e];return t!==undefined?p(t,ne):(console.warn("THREE.ColladaLoader: Couldn't find light with ID:",e),null)}function se(e){for(var t={array:[],stride:3},r=0;r<e.childNodes.length;r++){var n=e.childNodes[r];if(1===n.nodeType)switch(n.nodeName){case"float_array":t.array=s(n.textContent);break;case"Name_array":t.array=i(n.textContent);break;case"technique_common":var o=a(n,"accessor")[0];o!==undefined&&(t.stride=parseInt(o.getAttribute("stride")))}}return t}function oe(e){for(var t={},a=0;a<e.childNodes.length;a++){var r=e.childNodes[a];1===r.nodeType&&(t[r.getAttribute("semantic")]=c(r.getAttribute("source")))}return t}function ce(e){for(var t={type:e.nodeName,material:e.getAttribute("material"),count:parseInt(e.getAttribute("count")),inputs:{},stride:0,hasUV:!1},a=0,r=e.childNodes.length;a<r;a++){var n=e.childNodes[a];if(1===n.nodeType)switch(n.nodeName){case"input":var i=c(n.getAttribute("source")),s=n.getAttribute("semantic"),d=parseInt(n.getAttribute("offset")),l=parseInt(n.getAttribute("set")),u=l>0?s+l:s;t.inputs[u]={id:i,offset:d},t.stride=Math.max(t.stride,d+1),"TEXCOORD"===s&&(t.hasUV=!0);break;case"vcount":t.vcount=o(n.textContent);break;case"p":t.p=o(n.textContent)}}return t}function de(e){for(var t=0,a=0,r=e.length;a<r;a++){!0===e[a].hasUV&&t++}t>0&&t<e.length&&(e.uvsNeedsFix=!0)}function le(e){var t={},a=e.sources,r=e.vertices,n=e.primitives;if(0===n.length)return{};var i=function(e){for(var t={},a=0;a<e.length;a++){var r=e[a];t[r.type]===undefined&&(t[r.type]=[]),t[r.type].push(r)}return t}(n);for(var s in i){var o=i[s];de(o),t[s]=ue(o,a,r)}return t}function ue(e,t,a){for(var n={},i={array:[],stride:0},s={array:[],stride:0},o={array:[],stride:0},c={array:[],stride:0},d={array:[],stride:0},l=[],u=4,f=[],h=4,p=new r.BufferGeometry,m=[],g=0,v=0;v<e.length;v++){var b=e[v],y=b.inputs,w=0;switch(b.type){case"lines":case"linestrips":w=2*b.count;break;case"triangles":w=3*b.count;break;case"polylist":for(var N=0;N<b.count;N++){var x=b.vcount[N];switch(x){case 3:w+=3;break;case 4:w+=6;break;default:w+=3*(x-2)}}break;default:console.warn("THREE.ColladaLoader: Unknow primitive type:",b.type)}for(var k in p.addGroup(g,w,v),g+=w,b.material&&m.push(b.material),y){var A=y[k];switch(k){case"VERTEX":for(var T in a){var _=a[T];switch(T){case"POSITION":var E=i.array.length;if(fe(b,t[_],A.offset,i.array),i.stride=t[_].stride,t.skinWeights&&t.skinIndices&&(fe(b,t.skinIndices,A.offset,l),fe(b,t.skinWeights,A.offset,f)),!1===b.hasUV&&!0===e.uvsNeedsFix){w=(i.array.length-E)/i.stride;for(var C=0;C<w;C++)o.array.push(0,0)}break;case"NORMAL":fe(b,t[_],A.offset,s.array),s.stride=t[_].stride;break;case"COLOR":fe(b,t[_],A.offset,d.array),d.stride=t[_].stride;break;case"TEXCOORD":fe(b,t[_],A.offset,o.array),o.stride=t[_].stride;break;case"TEXCOORD1":fe(b,t[_],A.offset,c.array),o.stride=t[_].stride;break;default:console.warn('THREE.ColladaLoader: Semantic "%s" not handled in geometry build process.',T)}}break;case"NORMAL":fe(b,t[A.id],A.offset,s.array),s.stride=t[A.id].stride;break;case"COLOR":fe(b,t[A.id],A.offset,d.array),d.stride=t[A.id].stride;break;case"TEXCOORD":fe(b,t[A.id],A.offset,o.array),o.stride=t[A.id].stride;break;case"TEXCOORD1":fe(b,t[A.id],A.offset,c.array),c.stride=t[A.id].stride}}}return i.array.length>0&&p.addAttribute("position",new r.Float32BufferAttribute(i.array,i.stride)),s.array.length>0&&p.addAttribute("normal",new r.Float32BufferAttribute(s.array,s.stride)),d.array.length>0&&p.addAttribute("color",new r.Float32BufferAttribute(d.array,d.stride)),o.array.length>0&&p.addAttribute("uv",new r.Float32BufferAttribute(o.array,o.stride)),c.array.length>0&&p.addAttribute("uv2",new r.Float32BufferAttribute(c.array,c.stride)),l.length>0&&p.addAttribute("skinIndex",new r.Float32BufferAttribute(l,u)),f.length>0&&p.addAttribute("skinWeight",new r.Float32BufferAttribute(f,h)),n.data=p,n.type=e[0].type,n.materialKeys=m,n}function fe(e,t,a,r){var n=e.p,i=e.stride,s=e.vcount;function o(e){for(var t=n[e+a]*d,i=t+d;t<i;t++)r.push(c[t])}var c=t.array,d=t.stride;if(e.vcount!==undefined)for(var l=0,u=0,f=s.length;u<f;u++){var h=s[u];if(4===h){var p=l+1*i,m=l+2*i,g=l+3*i;o(l+0*i),o(p),o(g),o(p),o(m),o(g)}else if(3===h){p=l+1*i,m=l+2*i;o(l+0*i),o(p),o(m)}else if(h>4)for(var v=1,b=h-2;v<=b;v++){p=l+i*v,m=l+i*(v+1);o(l+0*i),o(p),o(m)}l+=i*h}else for(u=0,f=n.length;u<f;u+=i)o(u)}function he(e){return p(Ye.geometries[e],le)}function pe(e){return e.build!==undefined?e.build:e}function me(e,t){for(var a=0;a<e.childNodes.length;a++){var r=e.childNodes[a];if(1===r.nodeType)switch(r.nodeName){case"joint":t.joints[r.getAttribute("sid")]=ge(r);break;case"link":t.links.push(be(r))}}}function ge(e){for(var t,a=0;a<e.childNodes.length;a++){var r=e.childNodes[a];if(1===r.nodeType)switch(r.nodeName){case"prismatic":case"revolute":t=ve(r)}}return t}function ve(e,t){t={sid:e.getAttribute("sid"),name:e.getAttribute("name")||"",axis:new r.Vector3,limits:{min:0,max:0},type:e.nodeName,"static":!1,zeroPosition:0,middlePosition:0};for(var a=0;a<e.childNodes.length;a++){var n=e.childNodes[a];if(1===n.nodeType)switch(n.nodeName){case"axis":var i=s(n.textContent);t.axis.fromArray(i);break;case"limits":var o=n.getElementsByTagName("max")[0],c=n.getElementsByTagName("min")[0];t.limits.max=parseFloat(o.textContent),t.limits.min=parseFloat(c.textContent)}}return t.limits.min>=t.limits.max&&(t["static"]=!0),t.middlePosition=(t.limits.min+t.limits.max)/2,t}function be(e){for(var t={sid:e.getAttribute("sid"),name:e.getAttribute("name")||"",attachments:[],transforms:[]},a=0;a<e.childNodes.length;a++){var r=e.childNodes[a];if(1===r.nodeType)switch(r.nodeName){case"attachment_full":t.attachments.push(ye(r));break;case"matrix":case"translate":case"rotate":t.transforms.push(we(r))}}return t}function ye(e){for(var t={joint:e.getAttribute("joint").split("/").pop(),transforms:[],links:[]},a=0;a<e.childNodes.length;a++){var r=e.childNodes[a];if(1===r.nodeType)switch(r.nodeName){case"link":t.links.push(be(r));break;case"matrix":case"translate":case"rotate":t.transforms.push(we(r))}}return t}function we(e){var t={type:e.nodeName},a=s(e.textContent);switch(t.type){case"matrix":t.obj=new r.Matrix4,t.obj.fromArray(a).transpose();break;case"translate":t.obj=new r.Vector3,t.obj.fromArray(a);break;case"rotate":t.obj=new r.Vector3,t.obj.fromArray(a),t.angle=r.Math.degToRad(a[3])}return t}function Ne(e,t){for(var a=0;a<e.childNodes.length;a++){var r=e.childNodes[a];if(1===r.nodeType)switch(r.nodeName){case"technique_common":xe(r,t)}}}function xe(e,t){for(var a=0;a<e.childNodes.length;a++){var r=e.childNodes[a];if(1===r.nodeType)switch(r.nodeName){case"inertia":t.inertia=s(r.textContent);break;case"mass":t.mass=s(r.textContent)[0]}}}function ke(e){for(var t={target:e.getAttribute("target").split("/").pop()},a=0;a<e.childNodes.length;a++){var r=e.childNodes[a];if(1===r.nodeType)switch(r.nodeName){case"axis":var n=r.getElementsByTagName("param")[0];t.axis=n.textContent;var i=t.axis.split("inst_").pop().split("axis")[0];t.jointIndex=i.substr(0,i.length-1)}}return t}function Ae(e){return e.build!==undefined?e.build:e}function Te(e){for(var t=[],a=Be.querySelector('[id="'+e.id+'"]'),n=0;n<a.childNodes.length;n++){var i=a.childNodes[n];if(1===i.nodeType)switch(i.nodeName){case"matrix":var o=s(i.textContent),c=(new r.Matrix4).fromArray(o).transpose();t.push({sid:i.getAttribute("sid"),type:i.nodeName,obj:c});break;case"translate":case"scale":o=s(i.textContent);var d=(new r.Vector3).fromArray(o);t.push({sid:i.getAttribute("sid"),type:i.nodeName,obj:d});break;case"rotate":o=s(i.textContent),d=(new r.Vector3).fromArray(o);var l=r.Math.degToRad(o[3]);t.push({sid:i.getAttribute("sid"),type:i.nodeName,obj:d,angle:l})}}return t}var _e=new r.Matrix4,Ee=new r.Vector3;function Ce(e){for(var t={name:e.getAttribute("name")||"",type:e.getAttribute("type"),id:e.getAttribute("id"),sid:e.getAttribute("sid"),matrix:new r.Matrix4,nodes:[],instanceCameras:[],instanceControllers:[],instanceLights:[],instanceGeometries:[],instanceNodes:[],transforms:{}},a=0;a<e.childNodes.length;a++){var n=e.childNodes[a];if(1===n.nodeType)switch(n.nodeName){case"node":t.nodes.push(n.getAttribute("id")),Ce(n);break;case"instance_camera":t.instanceCameras.push(c(n.getAttribute("url")));break;case"instance_controller":t.instanceControllers.push(Le(n));break;case"instance_light":t.instanceLights.push(c(n.getAttribute("url")));break;case"instance_geometry":t.instanceGeometries.push(Le(n));break;case"instance_node":t.instanceNodes.push(c(n.getAttribute("url")));break;case"matrix":var i=s(n.textContent);t.matrix.multiply(_e.fromArray(i).transpose()),t.transforms[n.getAttribute("sid")]=n.nodeName;break;case"translate":i=s(n.textContent);Ee.fromArray(i),t.matrix.multiply(_e.makeTranslation(Ee.x,Ee.y,Ee.z)),t.transforms[n.getAttribute("sid")]=n.nodeName;break;case"rotate":i=s(n.textContent);var o=r.Math.degToRad(i[3]);t.matrix.multiply(_e.makeRotationAxis(Ee.fromArray(i),o)),t.transforms[n.getAttribute("sid")]=n.nodeName;break;case"scale":i=s(n.textContent);t.matrix.scale(Ee.fromArray(i)),t.transforms[n.getAttribute("sid")]=n.nodeName;break;case"extra":break;default:console.log(n)}}return He(t.id)?console.warn("THREE.ColladaLoader: There is already a node with ID %s. Exclude current node from further processing.",t.id):Ye.nodes[t.id]=t,t}function Le(e){for(var t={id:c(e.getAttribute("url")),materials:{},skeletons:[]},a=0;a<e.childNodes.length;a++){var r=e.childNodes[a];switch(r.nodeName){case"bind_material":for(var n=r.getElementsByTagName("instance_material"),i=0;i<n.length;i++){var s=n[i],o=s.getAttribute("symbol"),d=s.getAttribute("target");t.materials[o]=c(d)}break;case"skeleton":t.skeletons.push(c(r.textContent))}}return t}function Re(e,t){var a,n,i,s=[],o=[];for(a=0;a<e.length;a++){var c=e[a];if(He(c))Me(Se(c),t,s);else if(i=c,Ye.visualScenes[i]!==undefined)for(var d=Ye.visualScenes[c].children,l=0;l<d.length;l++){var u=d[l];if("JOINT"===u.type)Me(Se(u.id),t,s)}else console.error("THREE.ColladaLoader: Unable to find root bone of skeleton with ID:",c)}for(a=0;a<t.length;a++)for(l=0;l<s.length;l++)if((n=s[l]).bone.name===t[a].name){o[a]=n,n.processed=!0;break}for(a=0;a<s.length;a++)!1===(n=s[a]).processed&&(o.push(n),n.processed=!0);var f=[],h=[];for(a=0;a<o.length;a++)n=o[a],f.push(n.bone),h.push(n.boneInverse);return new r.Skeleton(f,h)}function Me(e,t,a){e.traverse((function(e){if(!0===e.isBone){for(var n,i=0;i<t.length;i++){var s=t[i];if(s.name===e.name){n=s.boneInverse;break}}n===undefined&&(n=new r.Matrix4),a.push({bone:e,boneInverse:n,processed:!1})}}))}function Oe(e){for(var t,a=[],n=e.matrix,i=e.nodes,s=e.type,o=e.instanceCameras,c=e.instanceControllers,d=e.instanceLights,l=e.instanceGeometries,u=e.instanceNodes,f=0,h=i.length;f<h;f++)a.push(Se(i[f]));for(f=0,h=o.length;f<h;f++){var m=te(o[f]);null!==m&&a.push(m.clone())}for(f=0,h=c.length;f<h;f++)for(var g=c[f],v=(t=g.id,p(Ye.controllers[t],I)),b=qe(he(v.id),g.materials),y=Re(g.skeletons,v.skin.joints),w=0,N=b.length;w<N;w++){var x;(x=b[w]).isSkinnedMesh&&(x.bind(y,v.skin.bindMatrix),x.normalizeSkinWeights()),a.push(x)}for(f=0,h=d.length;f<h;f++){var k=ie(d[f]);null!==k&&a.push(k.clone())}for(f=0,h=l.length;f<h;f++)for(w=0,N=(b=qe(he((g=l[f]).id),g.materials)).length;w<N;w++)a.push(b[w]);for(f=0,h=u.length;f<h;f++)a.push(Se(u[f]).clone());if(0===i.length&&1===a.length)x=a[0];else{x="JOINT"===s?new r.Bone:new r.Group;for(f=0;f<a.length;f++)x.add(a[f])}return""===x.name&&(x.name="JOINT"===s?e.sid:e.name),x.matrix.copy(n),x.matrix.decompose(x.position,x.quaternion,x.scale),x}var Ie=new r.MeshBasicMaterial({color:16711935});function je(e,t){for(var a=[],r=0,n=e.length;r<n;r++){var i=t[e[r]];i===undefined?(console.warn("THREE.ColladaLoader: Material with key %s not found. Apply fallback material.",e[r]),a.push(Ie)):a.push(Z(i))}return a}function qe(e,t){var a=[];for(var n in e){var i=e[n],s=je(i.materialKeys,t);0===s.length&&("lines"===n||"linestrips"===n?s.push(new r.LineBasicMaterial):s.push(new r.MeshPhongMaterial));var o=i.data.attributes.skinIndex!==undefined;if(o)for(var c=0,d=s.length;c<d;c++)s[c].skinning=!0;var l,u=1===s.length?s[0]:s;switch(n){case"lines":l=new r.LineSegments(i.data,u);break;case"linestrips":l=new r.Line(i.data,u);break;case"triangles":case"polylist":l=o?new r.SkinnedMesh(i.data,u):new r.Mesh(i.data,u)}a.push(l)}return a}function He(e){return Ye.nodes[e]!==undefined}function Se(e){return p(Ye.nodes[e],Oe)}function Ue(e){var t=new r.Group;t.name=e.name;for(var a=e.children,n=0;n<a.length;n++){var i=a[n];t.add(Se(i.id))}return t}function Fe(e){return p(Ye.visualScenes[e],Ue)}if(0===e.length)return{scene:new r.Scene};var ze=(new DOMParser).parseFromString(e,"application/xml"),Be=a(ze,"COLLADA")[0],Ve=ze.getElementsByTagName("parsererror")[0];if(Ve!==undefined){var Pe,Ge=a(Ve,"div")[0];return Pe=Ge?Ge.textContent:function(e){for(var t="",a=[e];a.length;){var r=a.shift();r.nodeType===Node.TEXT_NODE?t+=r.textContent:(t+="\n",a.push.apply(a,r.childNodes))}return t.trim()}(Ve),console.error("THREE.ColladaLoader: Failed to parse collada file.\n",Pe),null}var De=Be.getAttribute("version");console.log("THREE.ColladaLoader: File version",De);var We,Je=function(e){return{unit:l(a(e,"unit")[0]),upAxis:u(a(e,"up_axis")[0])}}(a(Be,"asset")[0]),Xe=new r.TextureLoader(this.manager);Xe.setPath(this.resourcePath||t).setCrossOrigin(this.crossOrigin),n&&(We=new n(this.manager)).setPath(this.resourcePath||t);var Ke=[],Ze={},Qe=0,Ye={animations:{},clips:{},controllers:{},images:{},effects:{},materials:{},cameras:{},lights:{},geometries:{},nodes:{},visualScenes:{},kinematicsModels:{},physicsModels:{},kinematicsScenes:{}};f(Be,"library_animations","animation",(function(e){for(var t={sources:{},samplers:{},channels:{}},a=0,r=e.childNodes.length;a<r;a++){var n,i=e.childNodes[a];if(1===i.nodeType)switch(i.nodeName){case"source":n=i.getAttribute("id"),t.sources[n]=se(i);break;case"sampler":n=i.getAttribute("id"),t.samplers[n]=m(i);break;case"channel":n=i.getAttribute("target"),t.channels[n]=g(i);break;default:console.log(i)}}Ye.animations[e.getAttribute("id")]=t})),f(Be,"library_animation_clips","animation_clip",(function(e){for(var t={name:e.getAttribute("id")||"default",start:parseFloat(e.getAttribute("start")||0),end:parseFloat(e.getAttribute("end")||0),animations:[]},a=0,r=e.childNodes.length;a<r;a++){var n=e.childNodes[a];if(1===n.nodeType)switch(n.nodeName){case"instance_animation":t.animations.push(c(n.getAttribute("url")))}}Ye.clips[e.getAttribute("id")]=t})),f(Be,"library_controllers","controller",(function(e){for(var t={},a=0,r=e.childNodes.length;a<r;a++){var n=e.childNodes[a];if(1===n.nodeType)switch(n.nodeName){case"skin":t.id=c(n.getAttribute("source")),t.skin=R(n);break;case"morph":t.id=c(n.getAttribute("source")),console.warn("THREE.ColladaLoader: Morph target animation not supported yet.")}}Ye.controllers[e.getAttribute("id")]=t})),f(Be,"library_images","image",(function(e){var t={init_from:a(e,"init_from")[0].textContent};Ye.images[e.getAttribute("id")]=t})),f(Be,"library_effects","effect",(function(e){for(var t={},a=0,r=e.childNodes.length;a<r;a++){var n=e.childNodes[a];if(1===n.nodeType)switch(n.nodeName){case"profile_COMMON":t.profile=H(n)}}Ye.effects[e.getAttribute("id")]=t})),f(Be,"library_materials","material",(function(e){for(var t={name:e.getAttribute("name")},a=0,r=e.childNodes.length;a<r;a++){var n=e.childNodes[a];if(1===n.nodeType)switch(n.nodeName){case"instance_effect":t.url=c(n.getAttribute("url"))}}Ye.materials[e.getAttribute("id")]=t})),f(Be,"library_cameras","camera",(function(e){for(var t={name:e.getAttribute("name")},a=0,r=e.childNodes.length;a<r;a++){var n=e.childNodes[a];if(1===n.nodeType)switch(n.nodeName){case"optics":t.optics=Q(n)}}Ye.cameras[e.getAttribute("id")]=t})),f(Be,"library_lights","light",(function(e){for(var t={},a=0,r=e.childNodes.length;a<r;a++){var n=e.childNodes[a];if(1===n.nodeType)switch(n.nodeName){case"technique_common":t=ae(n)}}Ye.lights[e.getAttribute("id")]=t})),f(Be,"library_geometries","geometry",(function(e){var t={name:e.getAttribute("name"),sources:{},vertices:{},primitives:[]},r=a(e,"mesh")[0];if(r!==undefined){for(var n=0;n<r.childNodes.length;n++){var i=r.childNodes[n];if(1===i.nodeType){var s=i.getAttribute("id");switch(i.nodeName){case"source":t.sources[s]=se(i);break;case"vertices":t.vertices=oe(i);break;case"polygons":console.warn("THREE.ColladaLoader: Unsupported primitive type: ",i.nodeName);break;case"lines":case"linestrips":case"polylist":case"triangles":t.primitives.push(ce(i));break;default:console.log(i)}}}Ye.geometries[e.getAttribute("id")]=t}})),f(Be,"library_nodes","node",Ce),f(Be,"library_visual_scenes","visual_scene",(function(e){var t={name:e.getAttribute("name"),children:[]};!function(e){for(var t=e.getElementsByTagName("node"),a=0;a<t.length;a++){var r=t[a];!1===r.hasAttribute("id")&&r.setAttribute("id","three_default_"+Qe++)}}(e);for(var r=a(e,"node"),n=0;n<r.length;n++)t.children.push(Ce(r[n]));Ye.visualScenes[e.getAttribute("id")]=t})),f(Be,"library_kinematics_models","kinematics_model",(function(e){for(var t={name:e.getAttribute("name")||"",joints:{},links:[]},a=0;a<e.childNodes.length;a++){var r=e.childNodes[a];if(1===r.nodeType)switch(r.nodeName){case"technique_common":me(r,t)}}Ye.kinematicsModels[e.getAttribute("id")]=t})),f(Be,"library_physics_models","physics_model",(function(e){for(var t={name:e.getAttribute("name")||"",rigidBodies:{}},a=0;a<e.childNodes.length;a++){var r=e.childNodes[a];if(1===r.nodeType)switch(r.nodeName){case"rigid_body":t.rigidBodies[r.getAttribute("name")]={},Ne(r,t.rigidBodies[r.getAttribute("name")])}}Ye.physicsModels[e.getAttribute("id")]=t})),f(Be,"scene","instance_kinematics_scene",(function(e){for(var t={bindJointAxis:[]},a=0;a<e.childNodes.length;a++){var r=e.childNodes[a];if(1===r.nodeType)switch(r.nodeName){case"bind_joint_axis":t.bindJointAxis.push(ke(r))}}Ye.kinematicsScenes[c(e.getAttribute("url"))]=t})),h(Ye.animations,v),h(Ye.clips,C),h(Ye.controllers,I),h(Ye.images,j),h(Ye.effects,X),h(Ye.materials,K),h(Ye.cameras,ee),h(Ye.lights,ne),h(Ye.geometries,le),h(Ye.visualScenes,Ue),function(){var e=Ye.clips;if(!0===d(e)){if(!1===d(Ye.animations)){var t=[];for(var a in Ye.animations)for(var n=b(a),i=0,s=n.length;i<s;i++)t.push(n[i]);Ke.push(new r.AnimationClip("default",-1,t))}}else for(var a in e)Ke.push(L(a))}(),function(){var e=Object.keys(Ye.kinematicsModels)[0],t=Object.keys(Ye.kinematicsScenes)[0],a=Object.keys(Ye.visualScenes)[0];if(e!==undefined&&t!==undefined){for(var n,i=(n=e,p(Ye.kinematicsModels[n],pe)),s=function(e){return p(Ye.kinematicsScenes[e],Ae)}(t),o=Fe(a),c=s.bindJointAxis,d={},l=0,u=c.length;l<u;l++){var f=c[l],h=Be.querySelector('[sid="'+f.target+'"]');if(h){var m=h.parentElement;v(f.jointIndex,m)}}var g=new r.Matrix4;Ze={joints:i&&i.joints,getJointValue:function(e){var t=d[e];if(t)return t.position;console.warn("THREE.ColladaLoader: Joint "+e+" doesn't exist.")},setJointValue:function(e,t){var a=d[e];if(a){var n=a.joint;if(t>n.limits.max||t<n.limits.min)console.warn("THREE.ColladaLoader: Joint "+e+" value "+t+" outside of limits (min: "+n.limits.min+", max: "+n.limits.max+").");else if(n["static"])console.warn("THREE.ColladaLoader: Joint "+e+" is static.");else{var i=a.object,s=n.axis,o=a.transforms;_e.identity();for(var c=0;c<o.length;c++){var l=o[c];if(l.sid&&-1!==l.sid.indexOf(e))switch(n.type){case"revolute":_e.multiply(g.makeRotationAxis(s,r.Math.degToRad(t)));break;case"prismatic":_e.multiply(g.makeTranslation(s.x*t,s.y*t,s.z*t));break;default:console.warn("THREE.ColladaLoader: Unknown joint type: "+n.type)}else switch(l.type){case"matrix":_e.multiply(l.obj);break;case"translate":_e.multiply(g.makeTranslation(l.obj.x,l.obj.y,l.obj.z));break;case"scale":_e.scale(l.obj);break;case"rotate":_e.multiply(g.makeRotationAxis(l.obj,l.angle))}}i.matrix.copy(_e),i.matrix.decompose(i.position,i.quaternion,i.scale),d[e].position=t}}else console.log("THREE.ColladaLoader: "+e+" does not exist.")}}}function v(e,t){var a=t.getAttribute("name"),r=i.joints[e];o.traverse((function(n){n.name===a&&(d[e]={object:n,transforms:Te(t),joint:r,position:r.zeroPosition})}))}}();var $e=function(e){return Fe(c(a(e,"instance_visual_scene")[0].getAttribute("url")))}(a(Be,"scene")[0]);return"Z_UP"===Je.upAxis&&$e.quaternion.setFromEuler(new r.Euler(-Math.PI/2,0,0)),$e.scale.multiplyScalar(Je.unit),{animations:Ke,kinematics:Ze,library:Ye,scene:$e}}})}}]);