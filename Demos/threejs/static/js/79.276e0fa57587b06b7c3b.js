(window.webpackJsonp=window.webpackJsonp||[]).push([[79],{"3F3C":function(t,i,e){"use strict";var n=e("Womt"),o=e("RyHr"),s=function(){function t(){this.initScene(),this.initCamera(),this.initLight(),this.initObject(),this.initRenderer(),this.initControls(),this.animate()}return t.prototype.initScene=function(){this.scene=new n.Scene},t.prototype.initCamera=function(){this.winHeight=window.innerHeight-document.getElementById("app").getBoundingClientRect().top,this.camera=new n.PerspectiveCamera(60,window.innerWidth/this.winHeight,.1,1e3),this.camera.position.x=20,this.camera.position.y=-200,this.camera.position.z=20,this.camera.lookAt(new n.Vector3(0,0,0))},t.prototype.initLight=function(){this.light=new n.DirectionalLight(16777215,1),this.light.position.set(-80,60,40),this.light.shadow.camera.far=500,this.light.shadow.camera.near=20,this.light.shadow.camera.left=-50,this.light.shadow.camera.right=50,this.light.shadow.camera.top=50,this.light.shadow.camera.bottom=-50,this.light.castShadow=!0,this.scene.add(this.light)},t.prototype.initObject=function(){},t.prototype.initRenderer=function(){var t=this;this.renderer=new n.WebGLRenderer,this.renderer.setSize(window.innerWidth,this.winHeight),this.renderer.shadowMap.enabled=!0,document.getElementById("app").appendChild(this.renderer.domElement);var i=new MutationObserver((function(e){for(var n=0,o=e;n<o.length;n++){var s=o[n];if("childList"==s.type&&s.removedNodes.length>0){i.disconnect(),t.unload(),t.clear();break}}}));i.observe(document.getElementById("app"),{childList:!0}),window.addEventListener("resize",this.resize.bind(this),!1)},t.prototype.initControls=function(){this.controls=new o.a(this.camera,this.renderer.domElement)},t.prototype.animate=function(){this.renderer&&(this.controls.update(),this.renderer.render(this.scene,this.camera),requestAnimationFrame(this.animate.bind(this)))},t.prototype.resize=function(){this.renderer&&(this.winHeight=window.innerHeight-document.getElementById("app").getBoundingClientRect().top,this.camera.aspect=window.innerWidth/this.winHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(window.innerWidth,this.winHeight))},t.prototype.clear=function(){cancelAnimationFrame(this.animate.bind(this)),this.controls.dispose(),this.scene.dispose(),this.renderer.dispose(),this.renderer.forceContextLoss(),this.renderer=null,this.scene=null,window.removeEventListener("resize",this.resize.bind(this),!1)},t.prototype.unload=function(){console.log("unload")},t}();i.a=s},wYDr:function(t,i,e){"use strict";e.r(i);var n,o=e("3F3C"),s=e("Womt"),a=e("iZKT"),r=undefined&&undefined.__extends||(n=function(t,i){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e])})(t,i)},function(t,i){function e(){this.constructor=t}n(t,i),t.prototype=null===i?Object.create(i):(e.prototype=i.prototype,new e)}),h=function(t){function i(){return t.call(this)||this}return r(i,t),i.prototype.initObject=function(){var t=this;this.options=[{k:"沿x轴移动",v:0,min:-2,max:2},{k:"沿y轴移动",v:0,min:-2,max:2},{k:"沿z轴移动",v:0,min:-2,max:2},{k:"沿x轴旋转",v:0,min:-Math.PI,max:Math.PI},{k:"沿y轴旋转",v:0,min:-Math.PI,max:Math.PI},{k:"沿z轴旋转",v:0,min:-Math.PI,max:Math.PI},{k:"沿x轴缩放",v:1,min:0,max:4},{k:"沿y轴缩放",v:1,min:0,max:4},{k:"沿z轴缩放",v:1,min:0,max:4},{k:"变换中心x轴",v:0,min:-2,max:2},{k:"变换中心y轴",v:0,min:-2,max:2},{k:"变换中心z轴",v:0,min:-2,max:2},{k:"变换顺序",v:"缩放旋转平移",option:["缩放旋转平移","缩放平移旋转","平移旋转缩放","平移缩放旋转","旋转平移缩放","旋转缩放平移"]}],this.camera.position.set(10,10,10),this.obj=new s.Mesh(new s.BoxGeometry(2,1,2),new s.MeshStandardMaterial({color:16711680})),this.scene.add(this.obj),this.scene.add(new s.AxesHelper(100)),this.gui=new a.a;for(var i=function(i){"undefined"!=typeof e.options[i].min?e.gui.add(e.options[i],"v",e.options[i].min,e.options[i].max,.1).name(e.options[i].k).onChange((function(e){t.update(t.options[i].k,e)})):e.gui.add(e.options[i],"v",e.options[i].option).name(e.options[i].k).onChange((function(e){t.update(t.options[i].k,e)}))},e=this,n=0;n<this.options.length;n++)i(n)},i.prototype.update=function(t,i){var e=new s.Matrix4;e.makeScale(this.options[6].v,this.options[7].v,this.options[8].v);var n=new s.Matrix4;n.makeTranslation(this.options[0].v,this.options[1].v,this.options[2].v);var o=new s.Matrix4,a=new s.Matrix4,r=new s.Matrix4,h=new s.Matrix4;o.makeRotationX(this.options[3].v),a.makeRotationY(this.options[4].v),r.makeRotationZ(this.options[5].v),h.multiply(o),h.multiply(a),h.multiply(r);var p=new s.Matrix4;p.makeTranslation(this.options[9].v,this.options[10].v,this.options[11].v);var l=new s.Matrix4;switch(l.multiply(p),this.options[12].v){case"缩放旋转平移":l.multiply(n),l.multiply(h),l.multiply(e);break;case"平移旋转缩放":l.multiply(e),l.multiply(h),l.multiply(n);break;case"缩放平移旋转":l.multiply(h),l.multiply(n),l.multiply(e);break;case"旋转平移缩放":l.multiply(e),l.multiply(n),l.multiply(h);break;case"旋转缩放平移":l.multiply(n),l.multiply(e),l.multiply(h);break;case"平移缩放旋转":l.multiply(h),l.multiply(e),l.multiply(n);break;case"平移旋转缩放":l.multiply(e),l.multiply(h),l.multiply(n)}var m=new s.Matrix4;m.getInverse(p),l.multiply(m),this.obj.matrix=l,this.obj.matrix.decompose(this.obj.position,this.obj.quaternion,this.obj.scale)},i.prototype.unload=function(){this.gui.destroy()},i}(o.a);i["default"]=h}}]);