(window.webpackJsonp=window.webpackJsonp||[]).push([[41],{"3Eo5":function(t,e,i){"use strict";i.r(e);var n,o=i("3F3C"),s=i("Womt"),r=i("PSD3"),a=i.n(r),c=undefined&&undefined.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),h=function(t){function e(){return t.call(this)||this}return c(e,t),e.prototype.initObject=function(){var t=new s.SphereGeometry(10,64,64),e=new s.Mesh(t,new s.MeshStandardMaterial({color:16711680}));this.obj2=new s.Mesh(t,new s.MeshStandardMaterial({color:65280}));var i=new s.Mesh(t,new s.MeshStandardMaterial({color:255}));e.position.set(-20,0,0),e.name="obj1",this.obj2.position.set(20,0,0),this.obj2.name="obj2",i.name="obj3",this.scene.add(e),this.scene.add(this.obj2),this.scene.add(i),this.scene.add(new s.AmbientLight(16777215)),this.camera.position.set(0,40,40),this.raycaster=new s.Raycaster,this.handler=this.onClick.bind(this),document.getElementById("app").addEventListener("click",this.handler,!1),this.span=document.createElement("span"),this.span.style.position="absolute",this.span.style.background="rgba(255, 255, 255, 0.5)",document.body.appendChild(this.span)},e.prototype.onClick=function(t){var e=document.getElementById("app"),i=t.clientX-e.getBoundingClientRect().left,n=t.clientY-e.getBoundingClientRect().top,o=i/e.offsetWidth*2-1,r=-1*(n/e.offsetHeight*2-1),c=new s.Vector2(o,r);this.raycaster.setFromCamera(c,this.camera);var h=this.raycaster.intersectObjects(this.scene.children,!0);if(0!==h.length){for(var d="",p=0;p<h.length;p++)if(h[p].object instanceof s.Mesh){d='<div class="pure-text-left">相交点与相机距离：'+h[p].distance.toFixed(2)+"<br>\n        相交点："+h[p].point.x.toFixed(2)+", "+h[p].point.y.toFixed(2)+", "+h[p].point.z.toFixed(2)+"<br>\n        物体序号："+h[p].object.name+"<br>\n        物体坐标："+h[p].object.position.x+", "+h[p].object.position.y+", "+h[p].object.position.z+"<br></div>";break}var l=a.a.mixin({customClass:{confirmButton:"pure-button pure-button-primary",cancelButton:"pure-button"},buttonsStyling:!1});a.a.fire({icon:"success",title:"选中三维物体",html:d,showCancelButton:!0,reverseButtons:!0,focusConfirm:!1,focusCancel:!1,allowOutsideClick:!1,allowEscapeKey:!1,confirmButtonText:"OK",cancelButtonText:"No"}).then((function(t){t.value?l.fire({title:"提示窗口已关闭",text:"可以继续选中物体",icon:"success"}):t.dismiss===a.a.DismissReason.cancel&&(l.fire({showConfirmButton:!1,title:"无效按钮",text:"按钮这个按钮无效",icon:"error",showCancelButton:!0,allowOutsideClick:!1,allowEscapeKey:!1}),l.disableButtons())}))}},e.prototype.animate=function(){if(this.renderer){var t=this.obj2.position.clone().project(this.camera),e=((t.x+1)*document.getElementById("app").offsetWidth/2+document.getElementById("app").getBoundingClientRect().left).toFixed(2),i=((1-t.y)*document.getElementById("app").offsetHeight/2+document.getElementById("app").getBoundingClientRect().top).toFixed(2);this.span.innerText!=="X="+e+", Y="+i+";"&&(this.span.style.left=e+"px",this.span.style.top=i+"px",this.span.innerText="X="+e+", Y="+i+";"),this.controls.update(),this.renderer.render(this.scene,this.camera),requestAnimationFrame(this.animate.bind(this))}},e.prototype.unload=function(){document.getElementById("app").removeEventListener("click",this.handler,!1),this.span.parentNode.removeChild(this.span)},e}(o.a);e["default"]=h},"3F3C":function(t,e,i){"use strict";var n=i("Womt"),o=i("RyHr"),s=function(){function t(){this.initScene(),this.initCamera(),this.initLight(),this.initObject(),this.initRenderer(),this.initControls(),this.animate()}return t.prototype.initScene=function(){this.scene=new n.Scene},t.prototype.initCamera=function(){this.winHeight=window.innerHeight-document.getElementById("app").getBoundingClientRect().top,this.camera=new n.PerspectiveCamera(60,window.innerWidth/this.winHeight,.1,1e3),this.camera.position.x=20,this.camera.position.y=-200,this.camera.position.z=20,this.camera.lookAt(new n.Vector3(0,0,0))},t.prototype.initLight=function(){this.light=new n.DirectionalLight(16777215,1),this.light.position.set(-80,60,40),this.light.shadow.camera.far=500,this.light.shadow.camera.near=20,this.light.shadow.camera.left=-50,this.light.shadow.camera.right=50,this.light.shadow.camera.top=50,this.light.shadow.camera.bottom=-50,this.light.castShadow=!0,this.scene.add(this.light)},t.prototype.initObject=function(){},t.prototype.initRenderer=function(){var t=this;this.renderer=new n.WebGLRenderer,this.renderer.setSize(window.innerWidth,this.winHeight),this.renderer.shadowMap.enabled=!0,document.getElementById("app").appendChild(this.renderer.domElement);var e=new MutationObserver((function(i){for(var n=0,o=i;n<o.length;n++){var s=o[n];if("childList"==s.type&&s.removedNodes.length>0){e.disconnect(),t.unload(),t.clear();break}}}));e.observe(document.getElementById("app"),{childList:!0}),window.addEventListener("resize",this.resize.bind(this),!1)},t.prototype.initControls=function(){this.controls=new o.a(this.camera,this.renderer.domElement)},t.prototype.animate=function(){this.renderer&&(this.controls.update(),this.renderer.render(this.scene,this.camera),requestAnimationFrame(this.animate.bind(this)))},t.prototype.resize=function(){this.renderer&&(this.winHeight=window.innerHeight-document.getElementById("app").getBoundingClientRect().top,this.camera.aspect=window.innerWidth/this.winHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(window.innerWidth,this.winHeight))},t.prototype.clear=function(){cancelAnimationFrame(this.animate.bind(this)),this.controls.dispose(),this.scene.dispose(),this.renderer.dispose(),this.renderer.forceContextLoss(),this.renderer=null,this.scene=null,window.removeEventListener("resize",this.resize.bind(this),!1)},t.prototype.unload=function(){console.log("unload")},t}();e.a=s}}]);